---
title: Android Rooting (Samsung Galaxy S22 Ultra 5G)
date: 2024-10-05 17:00:00 +0900
categories: [Linux, storage]
tags: [Android, Mobile, Rooting, magisk]
---

# Android 휴대폰 루팅하기 (Samsung Galaxy S22 Ultra 5G)


> 개인용 휴대폰에서는 파일이 손상 또는 휘발될 수 있으니 필히 백업해주시기 바랍니다. \
> 또한, 루팅을 진행하면 공식 수리나 A/S등의 서비스를 받지 못 하므로 평소 사용하는 휴대전화에 루팅을 한다면, 큰 주의를 기울여주시기 바랍니다. \
> 이거 보고도 못 따라하면, 정말 ~~병신~~입니다.
{: .prompt-warning}


## **0. 들어가며**

연구를 하며 루팅을 해야하는 이유는 여러가지가 있다. 시스템 파일들에 접근할 때 Super user 권한으로도 아예 접근하지 못 하는 커널 파일들이 존재한다. 이런 파일들에 대해 여러 작업을 할 때 필요하다. 그리고 내가 하는 연구에도 루팅이 필요하기 때문에 루팅을 하려고 한다. 일단, 개발자모드가 활성화되어 있다는 가정에서 사작한다. 루팅하는 과정에서 몇 번 초기화가 되는데, 초기화 할 때마다, 개발자 모드를 활성화하고, USB 디버깅 허용은 꼭 필수적으로 해준다.


## **1. Bootloader Unlocking**

먼저, Bootloader(이하 부트로더)를 먼저 잠금해제해줘야 한다. 이유는 새로운 이미지 파일을 프래쉬해줘야 하기 때문이다. 이를 위해서 OEM을 허용해줘야 한다. `개발자 옵션 > OEM 잠금 해제`와 `USB 디버깅 허용` 옵션들을 허용한다. 그리고 전원을 끈 상태에서 `볼륨 업/다운` 버튼을 동시에 누른 상태에서 USB 케이블을 연결하면 Warning 화면이 뜬다. 이후 볼륨 업 버튼을 길게 누른다. 그러면 ***Unlock Bootloader?***라는 화면이 뜬다. 그러면, 볼륨 업 버튼을 눌러 잠금해제를 해준다. 아마 이미 부트로더가 잠금해제되어 있으면, ***Lock Bootloader?***라는 화면이 뜨는데, 이때는 볼륨 다운 버튼으로 No를 해준다.

## **2. 1차 이미지 파일 설치**

[SamFW](https://www.samfw.com)에 가서 SM-908N(다른 기종은 `설정 > 휴대전화 정보 > 모델명` 확인) 검색 후 KOO 클릭(KTC는 KT, LUC는 LG U+, SKC는 SKT이다)한다. 들어가보면 버전이 드럽게 많다. 여기서 아무거나 다운받으면 안 되고,`설정 > 휴대전화 정보 > 소프트웨어 정보`가서 SamFW에 표기된 version이 폰의 기저대역버전과 맞는지 확인하고 다운로드 받는다. 그리고 압축도 풀어 놓는다.

그리고 추가로 하나의 소프트웨어를 더 다운 받아야 하는데 Odin3이다. 나는 버전 3.14를 사용했다. [다운로드 페이지](https://odindownloader.com/download/odin3-v3-14-1)를 가서 다운로드 받아준다. 그 안의 실행파일을 실행한다.

그 다음으로 모바일을 다운로드 모드로 진입해야한다. 다운로드 모드는 볼륨 업/다운 모드 동시에 누른채 USB 케이블을 연결하면 뜨는 Warning 페이지에서 볼륨 업 버튼을 아까와 다르게 짧게 눌러준다. 그러면, 다운로드 모드에 진입한 상태이다. 그 상태에서 Odin3 창을 보면 BL, AP, CP, CSC 섹션이 각각 있다. SamFW에서 다운로드 받았던 파일 중에 각 섹션의 이름으로 시작하는 파일들이 있다. 예를 들어, AP_XXXXX_...등이다. 각 섹션에 맞게 파일을 로드해주면 된다. 그리고 설치를 위해 `START`버튼을 눌러준다. Fail 없이 완료되면 다음으로 넘어가면 된다.

## **3. File Patching**

이제 magisk라는 앱을 다운로드 받아야한다. [magisk github 페이지](https://github.com/topjohnwu/Magisk/releases)에서 .apk 파일을 받아준다. 그리고 그리고 그 파일을 휴대폰 Download 폴더에 옮겨준다. 그리고 휴대폰의 Download에 가서 Magisk를 휴대폰에 설치해준다.

이제 SamFW에서 다운로드 받아놓은 파일들 중에 AP로 시작하는 파일이 있는데 이 파일 또한 휴대폰의 Download 폴더로 옮겨준다. 

설치된 magisk를 실행하고 `Magisk > Install > Select and Patch a File > AP 파일 선택`해준다. 그리고 `Let's Go` 버튼을 누르면 뭔가 진행되고 완료되면 patch 파일이 생성된다(휴대폰에서 파일 앱에서 확인 가능). 파일 이름은 `magisk_patched`로 시작한다. 이렇게 생성된 `magisk_patched` 파일을 다운로드 받았었던 SamFW 파일들이 있는 폴더로 옮긴다.

## **4. 2차 이미지 파일 설치**

1차 이미지 파일 설치와 동일하게 다시 Odin을 켜준다. BL, CP, CSC에 각각 섹션에 맞게 파일들 넣어준다. ***단, AP 부분에는 `magisk_patch`파일을 넣는다.*** 그리고 `option > auto reboot > off` 자동 재부팅 옵션은 꺼준다. 

이렇게 했으면, 다시 휴대폰을 ***다운로드 모드***로 들어가준다. 들어갔으면, Odin 프로그램 start 해준다.


## **5. Factory Data Reset**

Odin에서 이미지 파일 다운로드가 끝났으면 `볼륨 다운 + 전원` 버튼을 동시에 7초 이상 꾹 누르면, 재부팅 시작하기 시작한다. 그때 바로 `볼륨 업` 버튼을 눌러주면 **복구 모드**에 진입한다. **복구 모드**에 진입하면, `Factory Data Reset` 옵션이 있다. 이걸 선택해서 초기화해준다.

## **6. Root Check**

이제 `Root Checker`, `Magisk`를 다시 다운로드 받은 이후에 루팅이 됐는지 확인하면 끝이다. 완.